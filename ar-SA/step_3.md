## خسارة اللعبة

اهم الاشياء اولا! تحتاج إلى طريقة لإنهاء اللعبة عندما تنفذ ارواح اللاعب. في الوقت الحالي لا يحدث ذلك.

ربما لاحظت أن كتلة `اخسر`{:class="block3myblocks"} في كتل **لبناتي** في النص البرمجي للكائن **شخصية اللاعب** فارغة. ستقوم بملئها وإعداد جميع القطع اللازمة لشاشة جميلة لـ"انتهت اللعبة".

--- task ---

أولا، العثور على كتلة `اخسر`{:class="block3myblocks"} وملئه بالتعليمات البرمجية التالية:

```blocks3
    define اخسر
+   اوقف  [المقاطع الاخرى في الكائن v] :: control stack
+    بث [انتهت اللعبة v]
+    go to x:(0) y:(0)
+    say [انتهت اللعبة!] for (2) secs
+    stop [الكل v]
```

--- /task ---

--- collapse ---
---
title: ماذا يفعل هذا الرمز؟
---

عندما يتم تشغيل كتلة `اخسر`{:class="block3myblocks"} ، فإن ما تقوم به هو:

1. وقف الفيزياء وغيرها من النصوص البرمجية للعبة والتي تعمل على **شخصية اللاعب**
2. تخبر كل الكائنات ألاخرى أن اللعبة قد انتهت عن طريق **بث** الرسالة `انتهت اللعبة`{:class="block3events"} والتي يستجيبوا لها ويغيروا ما كانوا يقومون به
3. تنقل **شخصية اللاعب** إلى مركز المسرح وتطلب منهم إخبار اللاعب بأن اللعبة قد انتهت
4. وقف جميع النصوص النصية في اللعبة

--- /collapse ---

أنت الآن بحاجة للتأكد من أن جميع الكائنات يعرفون ما يجب فعله عندما تنتهي اللعبة ، وكيفية إعادة ضبط أنفسهم عندما يبدأ اللاعب في لعبة جديدة. **لا تنس أن أي نصوص جديدة تضيفها أيضًا قد تحتاج لهذا الكود البرمجي!**

### إخفاء المنصات والحواف

--- task ---

ابدأ باسهل الكائنات. كائنات **المنصات** و **الحواف** على حد سواء تحتاج نص برمجي لتظهر عند بدء تشغيل اللعبة وتختفي عندما تتلقى البث `انتهت اللعبة`{:class="block3events"}، لذلك قم باضافة هذه الكتل البرمجية إلى كل منها:

```blocks3
+    when I receive [انتهت اللعبة  v]
+    hide
```

```blocks3
+    when green flag clicked
+    show
```

--- /task ---

### وقف النجوم

الآن، إذا نظرت الى الكتل البرمجية لكائن **تجميع**، سترى أنها تعمل من خلال **استنساخ** نفسه. أي أنه يُنشئ نسخًا من نفسه تتبع الإرشادات الخاصة بالكتلة `عندما أبدأ كنسخة`{:class="block3events"}.

سنتحدث أكثر عن ما الذي يجعل النسخ مميزة عندما ننتقل إلى خطوة إنشاء مقتنيات جديدة ومختلفة. في الوقت الراهن، ما تحتاج إلى معرفته هو أن النسخ يمكن ان تقوم **تقريبا** بكل ما يمكن للكائن العادي أن يقوم به، بما في ذلك تلقي رسائل `البث`{:class="block3events"}.

انظر كيف يعمل كائن **تجميع**. انظر ما إذا كان بامكانك فهم بعض التعليمات البرمجية الخاصة به:

```blocks3
    when green flag clicked
    hide
    set [قيمة التجميعات v] to [1]
    set [سرعة التجميعات v] to [1]
    set [عدد مرات التجميعات v] to [1]
    set [إنشاء تجميعات v] to [true]
    set [نوع التجميعات v] to [1]
    repeat until <not <(إنشاء تجميعات) = [true]>>
        wait (عدد مرات التجميعات) secs
        go to x: (pick random (-240) to (240)) y: (179)
        create clone of [myself v]
    end
```

1. أولا يجعل كائن **تجميع** الاصلي غير مرئي عن طريق إخفائه
2. يقوم بإعداد متغيرات التحكم - سنعود إليها لاحقًا
3. إن متغير `انشاء مقتنيات`{:class="block3variables"} هو مفتاح التشغيل/الاطفاء للاستنساخ: الحلقة التكرارية تقوم بانشاء نسخ اذا كان `انشاء مقتنيات`{:class="block3variables"} `صحيح` ولا تعمل شيء اذا لم يكن كذلك

--- task ---

الآن قم بإنشاء الكتلة البرمجية للكائن **تجميع** بحيث تتفاعل مع البث `انتهت اللعبة`:

```blocks3
+    when I receive [انتهت اللعبة v]
+    hide
+    set [إنشاء تجميعات v] to [false]
```

--- /task ---

هذه التعليمات البرمجية الكود تشبه التعليمات البرمجية الخاصة بالتحكم في كائنات **المنصات** و **الحواف**. الاختلاف الوحيد هو أنك تقوم أيضًا بتعيين المتغير `انشاء مقتنيات`{:class="block3variables"} على `خطأ` بحيث لا يتم إنشاء أي نسخ جديدة عند انتهاء اللعبة.

لاحظ أنه يمكنك استخدام المتغير `انشاء مقتنيات`{:class="block3variables"} لتمرير الرسائل من جزء من التعليمات البرمجية إلى آخر!